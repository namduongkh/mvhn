webpackJsonp([2],{566:function(module,exports,__webpack_require__){function injectStyle(ssrContext){__webpack_require__(631)}var Component=__webpack_require__(3)(__webpack_require__(633),__webpack_require__(639),injectStyle,null,null);module.exports=Component.exports},594:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends2=__webpack_require__(7),_extends3=_interopRequireDefault(_extends2),_getPrototypeOf=__webpack_require__(256),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(28),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(38),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(257),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(258),_inherits3=_interopRequireDefault(_inherits2),_services=__webpack_require__(68),_services2=_interopRequireDefault(_services),_axios=__webpack_require__(27),_axios2=_interopRequireDefault(_axios),ResourcesService=function(_Service){function ResourcesService(){return(0,_classCallCheck3.default)(this,ResourcesService),(0,_possibleConstructorReturn3.default)(this,(ResourcesService.__proto__||(0,_getPrototypeOf2.default)(ResourcesService)).apply(this,arguments))}return(0,_inherits3.default)(ResourcesService,_Service),(0,_createClass3.default)(ResourcesService,[{key:"index",value:function(params){return this.getItems(params)}},{key:"new",value:function(){return this.newItem()}},{key:"edit",value:function(id){return this.getItemById(id)}},{key:"show",value:function(id){return this.getItemById(id)}},{key:"create",value:function(data){return this.addItem(data)}},{key:"update",value:function(id,data){return this.updateItem(id,data)}},{key:"delete",value:function(id){return this.deleteItem(id)}},{key:"member",value:function(actionName){var method=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},config=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _axios2.default.request((0,_extends3.default)({url:this.apiBaseUrl+"/"+actionName,method:method,data:data,withCredentials:!0},config))}}]),ResourcesService}(_services2.default);exports.default=ResourcesService},631:function(module,exports,__webpack_require__){var content=__webpack_require__(632);"string"==typeof content&&(content=[[module.i,content,""]]),content.locals&&(module.exports=content.locals);__webpack_require__(44)("02b8532c",content,!0,{})},632:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(!1),exports.push([module.i,"\n#post-content {\n  height: 65vh;\n  overflow: hidden;\n  overflow-y: scroll;\n}\n",""])},633:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _assign=__webpack_require__(26),_assign2=_interopRequireDefault(_assign),_extends2=__webpack_require__(7),_extends3=_interopRequireDefault(_extends2),_vuex=__webpack_require__(10),_LinkLoader=__webpack_require__(634),_LinkLoader2=_interopRequireDefault(_LinkLoader);exports.default={name:"LinkMapper",components:{LinkLoader:_LinkLoader2.default},data:function(){return{cmsUrl:window.settings.services.cmsUrl+"/posts",formData:{},wordSearch:""}},computed:(0,_extends3.default)({},(0,_vuex.mapGetters)(["itemSelected"])),watch:{itemSelected:function(data){data&&(this.formData=(0,_assign2.default)({},data))}},methods:(0,_extends3.default)({},(0,_vuex.mapActions)(["initService","saveItem","getItemById","goto"]),{reset:function(){this.getItemById({id:this.$route.params.id})},save:function(options){var _this=this,self=this;this.$validator.validateAll().then(function(res){res?self.saveItem({formData:self.formData,options:options}):_this.$notify("Please check data",{type:"warning",placement:{from:"bottom"}})})},replaceLink:function(selectedLink){this.formData.content=this.formData.content.replace(new RegExp("(\\s)"+selectedLink.text+"(\\s)","gim"),"$1"+selectedLink.html+"$2")},onSelection:function(){var debouncer=void 0,self=this;document.onselectionchange=function(e){clearTimeout(debouncer),document.getSelection().containsNode(document.getElementById("post-content"),!0)&&(debouncer=setTimeout(function(){var word=document.getSelection().toString().trim();word&&(self.wordSearch=word)},300))}}}),created:function(){this.initService(this.cmsUrl),this.getItemById({id:this.$route.params.id}),this.onSelection()}}},634:function(module,exports,__webpack_require__){function injectStyle(ssrContext){__webpack_require__(635)}var Component=__webpack_require__(3)(__webpack_require__(637),__webpack_require__(638),injectStyle,null,null);module.exports=Component.exports},635:function(module,exports,__webpack_require__){var content=__webpack_require__(636);"string"==typeof content&&(content=[[module.i,content,""]]),content.locals&&(module.exports=content.locals);__webpack_require__(44)("184b7465",content,!0,{})},636:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(!1),exports.push([module.i,"\nimg {\n  max-width: 100%;\n  height: auto;\n}\n",""])},637:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _resources_service=__webpack_require__(594),_resources_service2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_resources_service),_lodash=__webpack_require__(69);exports.default={name:"LinkLoader",props:{word:{type:String}},data:function(){return{search:{title:"",select:"title url external",sort:"createdAt|desc",searchPost:!1,searchProperty:!1},service:new _resources_service2.default(window.settings.services.cmsUrl+"/links"),links:[],link:{},selectedLink:{}}},methods:{loadLink:function(){var self=this;this.service.index(this.search).then(function(resp){self.links=resp.data.data})},removeLink:function(link_id){if(confirm("Are you sure to remove?")){var self=this;this.service.delete(link_id).then(function(resp){self.$notify(resp.data.message,{type:"success",placement:{from:"bottom"}}),self.links=(0,_lodash.remove)(self.links,function(l){return l._id.toString()!=link_id.toString()})})}},saveLink:function(){var _this=this,self=this;this.$validator.validateAll().then(function(res){res?self.service.create(_this.link).then(function(resp){self.$notify(resp.data.message,{type:"success",placement:{from:"bottom"}}),self.links.unshift(resp.data.data),self.link={}}):self.$notify("Please check data",{type:"warning",placement:{from:"bottom"}})})},generateLinkHtml:function(link){var linkHtml='<a href="'+link.url+'" title="'+link.title+'" target="_blank"';return link.external&&(linkHtml+=" nofollow"),linkHtml+=">"+link.title+"</a>"},wordChange:function(word){word&&(this.search.title=word,this.link.title=word,this.loadLink())}},created:function(){this.wordChange(this.word)},watch:{word:function(val){this.wordChange(val)},selectedLink:function(val){this.$emit("selectedLink",{text:this.word,link:{title:val.title,url:val.url,external:val.external},html:this.generateLinkHtml(val)})}}}},638:function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"row"},[_c("div",{staticClass:"col-sm-12"},[_c("form",[_c("label",[_vm._v("Title")]),_vm._v(" "),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.link.title,expression:"link.title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",placeholder:"something","data-vv-name":"Title"},domProps:{value:_vm.link.title},on:{input:function($event){$event.target.composing||_vm.$set(_vm.link,"title",$event.target.value)}}}),_vm._v(" "),_c("label",[_vm._v("Url")]),_vm._v(" "),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.link.url,expression:"link.url"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",placeholder:"http://example.com","data-vv-name":"Url"},domProps:{value:_vm.link.url},on:{input:function($event){$event.target.composing||_vm.$set(_vm.link,"url",$event.target.value)}}}),_vm._v(" "),_c("label",[_vm._v("External")]),_vm._v(" "),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.link.external,expression:"link.external"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(_vm.link.external)?_vm._i(_vm.link.external,null)>-1:_vm.link.external},on:{change:function($event){var $$a=_vm.link.external,$$el=$event.target,$$c=!!$$el.checked;if(Array.isArray($$a)){var $$i=_vm._i($$a,null);$$el.checked?$$i<0&&_vm.$set(_vm.link,"external",$$a.concat([null])):$$i>-1&&_vm.$set(_vm.link,"external",$$a.slice(0,$$i).concat($$a.slice($$i+1)))}else _vm.$set(_vm.link,"external",$$c)}}}),_vm._v(" "),_c("br"),_vm._v(" "),_c("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function($event){return _vm.saveLink()}}},[_c("i",{staticClass:"fa fa-plus"}),_vm._v(" Create\n      ")])]),_vm._v(" "),_c("hr"),_vm._v(" "),_c("div",{staticClass:"form-inline"},[_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.search.title,expression:"search.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Something"},domProps:{value:_vm.search.title},on:{input:function($event){$event.target.composing||_vm.$set(_vm.search,"title",$event.target.value)}}}),_vm._v(" "),_c("label",[_vm._v("Include Post")]),_vm._v(" "),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.search.searchPost,expression:"search.searchPost"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(_vm.search.searchPost)?_vm._i(_vm.search.searchPost,null)>-1:_vm.search.searchPost},on:{change:function($event){var $$a=_vm.search.searchPost,$$el=$event.target,$$c=!!$$el.checked;if(Array.isArray($$a)){var $$i=_vm._i($$a,null);$$el.checked?$$i<0&&_vm.$set(_vm.search,"searchPost",$$a.concat([null])):$$i>-1&&_vm.$set(_vm.search,"searchPost",$$a.slice(0,$$i).concat($$a.slice($$i+1)))}else _vm.$set(_vm.search,"searchPost",$$c)}}}),_vm._v(" "),_c("label",[_vm._v("Include Property")]),_vm._v(" "),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.search.searchProperty,expression:"search.searchProperty"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(_vm.search.searchProperty)?_vm._i(_vm.search.searchProperty,null)>-1:_vm.search.searchProperty},on:{change:function($event){var $$a=_vm.search.searchProperty,$$el=$event.target,$$c=!!$$el.checked;if(Array.isArray($$a)){var $$i=_vm._i($$a,null);$$el.checked?$$i<0&&_vm.$set(_vm.search,"searchProperty",$$a.concat([null])):$$i>-1&&_vm.$set(_vm.search,"searchProperty",$$a.slice(0,$$i).concat($$a.slice($$i+1)))}else _vm.$set(_vm.search,"searchProperty",$$c)}}}),_vm._v(" "),_c("br"),_vm._v(" "),_c("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function($event){return _vm.loadLink()}}},[_c("i",{staticClass:"fa fa-search"}),_vm._v(" Search\n      ")])]),_vm._v(" "),_c("br"),_vm._v(" "),_c("span",[_vm._v("Replace for:")]),_vm._v(" "),_c("span",{staticClass:"label label-default"},[_vm._v(_vm._s(_vm.word))]),_vm._v(" "),_c("br"),_vm._v(" "),_c("br"),_vm._v(" "),_c("div",{staticClass:"row"},_vm._l(_vm.links,function(link){return _c("div",{key:link._id,staticClass:"col-xs-6"},[_c("strong",{on:{click:function($event){_vm.selectedLink=link}}},[_vm._v(_vm._s(link.title))]),_vm._v(" "),_c("span",{staticStyle:{"white-space":"nowrap"}},[_c("a",{attrs:{href:link.url,target:"_blank"}},[_c("small",[_vm._v("("+_vm._s(link.url)+")")])]),_vm._v(" "),_c("a",{attrs:{href:"javascript:void(0)"}},[_c("i",{staticClass:"fa fa-remove",on:{click:function($event){return _vm.removeLink(link._id)}}})])])])}),0)])])},staticRenderFns:[]}},639:function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"page-content"},[_c("div",{staticClass:"container-fluid"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-sm-12 text-right"},[_c("button",{staticClass:"btn btn-primary",on:{click:function($event){return _vm.save({})}}},[_c("i",{staticClass:"fa fa-save"}),_vm._v(" Save\n        ")]),_vm._v(" "),_c("button",{staticClass:"btn btn-secondary",on:{click:function($event){return _vm.goto({name:"ShowPost",params:{id:_vm.formData._id}})}}},[_c("i",{staticClass:"fa fa-edit"}),_vm._v(" Edit\n        ")]),_vm._v(" "),_c("button",{staticClass:"btn btn-secondary",on:{click:function($event){return _vm.reset()}}},[_c("i",{staticClass:"fa fa-refresh"}),_vm._v(" Reset\n        ")]),_vm._v(" "),_c("button",{staticClass:"btn btn-secondary",on:{click:function($event){return _vm.goto({name:"ListPosts"})}}},[_c("i",{staticClass:"fa fa-list"}),_vm._v(" List\n        ")])])]),_vm._v(" "),_c("div",{staticClass:"box-typical box-typical-padding row"},[_c("div",{staticClass:"col-sm-12"},[_c("h5",{staticClass:"m-t-lg with-border"},[_vm._v(_vm._s(_vm.formData.title))])]),_vm._v(" "),_c("div",{staticClass:"col-sm-12 row"},[_c("div",{staticClass:"col-sm-7"},[_c("div",{attrs:{id:"post-content"},domProps:{innerHTML:_vm._s(_vm.formData.content)}})]),_vm._v(" "),_c("div",{staticClass:"col-sm-5"},[_c("LinkLoader",{attrs:{word:_vm.wordSearch},on:{selectedLink:_vm.replaceLink}})],1)])])])])},staticRenderFns:[]}}});